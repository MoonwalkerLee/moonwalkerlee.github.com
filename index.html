<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name='yuntu' content='99260305fb08929f659bd8a1db905ada'/>
    <!meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>JamesLee的笔记</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>JamesLee的仓库</h1>
        <h2>现在的努力是为了实现小时候吹过的牛逼</h2>
        <a href="https://github.com/MoonwalkerLee" class="button"><small>Follow me on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
         <h3>
	<a name="STM32发生HardFault_Handler错误的查找方法" class="anchor" href="STM32发生HardFault_Handler错误的查找方法"><span class="octicon octicon-link"></span></a>STM32发生HardFault_Handler错误的查找方法</h3>
	
	
	<p>
	我遇到的HardFault_Handler错误的原因最最多的原因是数组越界以及指针指飞，<br />
	其实这两个是差不多的，都是访问了不该访问的地方导致了错误，就像一个路痴，<br />
	漫无目的的走到了一个陌生的地方……然后就迷路了……然后就木有然后了……<br />
	（貌似是第一次写原创，我该如何装成经常写的样子……）<br />
	以前查找这种错误时比较盲目，就是在程序中缕着流程一步步的查找，逐个屏蔽进<br />
	行排除，在程序隔一段加个while(1)，以及通过串口发出错误状态日志等……这些方<br />
	法都效率低下，不易查找。相比之下，查看堆栈的方法更加实用，效率也高。<br />
	在HardFault_Handler中的while(1)设置断点，然后运行，给它触发HardFault_Handler<br />
	的条件，然后到断点处之后，查看watch窗口中的Call Stack+Local，也就是堆栈以及局<br />
	部变量，程序执行到哪一句发生的错误，以及当时各个压栈的函数的各个局部变量的值一<br />
	目了然，这里记录了死者临死前的五分钟到底对自己做了什么傻事……如下图，就是对一个<br />
	地址为NULL的空指针 p 进行解引用操作造成的HardFault_Handler错误<br />
	
		
	</p>
	<br />
	<br />
	 <h3>
 <h3>
<a name="C中.h头文件的写法" class="anchor" href="#C中.h头文件的写法"><span class="octicon octicon-link"></span></a>C中.h头文件的写法</h3>


<p>
Michael Barr建议：<br />
1. 系统中为每个功能模块创建一个.h头文件。<br />
   一个功能模块实现系统的一个方面功能，它可能由多个.c和.asm文件来实现，为它创建一个.h头文件。<br />
2.把一个模块的公共接口的函数原型放到.h文件中。这是public函数。<br />
<br />
3.不要在.h头文件中放私有函数或私有宏, 把它们放到.c文件中，并用static修饰函数。<br />
<br />
4.在.h头文件中，不要有执行的代码和变量声明，除非是inline函数。<br />
<br />
5.在.h头文件中，不要暴露变量，在.c中声明变量，如果外部需要使用这个变量，在.h中使用extern关键字来暴露变量。<br />
<br />
6.在.h头文件中，不要暴露任何特定模块相关的数据结构的内部格式。<br />
   在.h头中，不要声明具体数据结构，如struct {...} foo，而是把它放到.c中，如果模块中需要这个结构输入或输出，在头中定义一个类型typedef struct foo module_type，这样客户模块可以创建它的实例。客户模块不必知道具体的foo结构的内部细节。<br />
<br />
  DON’T expose the internal format of any module-specific data structure passed to or returned from one or more of the module’s interface functions.That is to say there should be no “struct { … } foo;” code in any header file.  If you do have a type you need to pass in and out of your module, so client modules can create instances of it, you can simply “typedef struct foo moduleb_type” in the header file.  Client modules should never know, and this way cannot know, the internal format of the struct.
<br />
<br />
<br />
<br />
<br />
<br />
参考：<br />
【1】http://embeddedgurus.com/barr-code/2010/11/what-belongs-in-a-c-h-header-file/</p>
<br />
<br />
 <h3>
<a name="我的第一篇博客" class="anchor" href="#welcome-to-github-pages"><span class="octicon octicon-link"></span></a>Welcome to GitHub Pages.</h3>

<p><font size="5" face="arial" color="red">试试效果咋样</font></p>

<pre><code>$ cd your_repo_root/repo_name
$ git fetch origin
$ git checkout gh-pages
</code></pre>

<p>If you're using the GitHub for Mac, simply sync your repository and you'll see the new branch.</p>
         
		 <h3>
<a name="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages"><span class="octicon octicon-link"></span></a>Welcome to GitHub Pages.</h3>

<p>This automatic page generator is the easiest way to create beautiful pages for all of your projects. Author your page content here using GitHub Flavored Markdown, select a template crafted by a designer, and publish. After your page is generated, you can check out the new branch:</p>

<pre><code>$ cd your_repo_root/repo_name
$ git fetch origin
$ git checkout gh-pages
</code></pre>

<p>If you're using the GitHub for Mac, simply sync your repository and you'll see the new branch.</p>

<h3>
<a name="designer-templates" class="anchor" href="#designer-templates"><span class="octicon octicon-link"></span></a>Designer Templates</h3>

<p>We've crafted some handsome templates for you to use. Go ahead and continue to layouts to browse through them. You can easily go back to edit your page before publishing. After publishing your page, you can revisit the page generator and switch to another theme. Your Page content will be preserved if it remained markdown format.</p>

<h3>
<a name="rather-drive-stick" class="anchor" href="#rather-drive-stick"><span class="octicon octicon-link"></span></a>Rather Drive Stick?</h3>

<p>If you prefer to not use the automatic generator, push a branch named <code>gh-pages</code> to your repository to create a page manually. In addition to supporting regular HTML content, GitHub Pages support Jekyll, a simple, blog aware static site generator written by our own Tom Preston-Werner. Jekyll makes it easy to create site-wide headers and footers without having to copy them across every page. It also offers intelligent blog support and other advanced templating features.</p>

<h3>
<a name="authors-and-contributors" class="anchor" href="#authors-and-contributors"><span class="octicon octicon-link"></span></a>Authors and Contributors</h3>

<p>You can <a href="https://github.com/blog/821" class="user-mention">@mention</a> a GitHub username to generate a link to their profile. The resulting <code>&lt;a&gt;</code> element will link to the contributor's GitHub Profile. For example: In 2007, Chris Wanstrath (<a href="https://github.com/defunkt" class="user-mention">@defunkt</a>), PJ Hyett (<a href="https://github.com/pjhyett" class="user-mention">@pjhyett</a>), and Tom Preston-Werner (<a href="https://github.com/mojombo" class="user-mention">@mojombo</a>) founded GitHub.</p>

<h3>
<a name="support-or-contact" class="anchor" href="#support-or-contact"><span class="octicon octicon-link"></span></a>Support or Contact</h3>

<p>Having trouble with Pages? Check out the documentation at <a href="http://help.github.com/pages">http://help.github.com/pages</a> or contact <a href="mailto:support@github.com">support@github.com</a> and we’ll help you sort it out.</p>
        </section>

        <aside id="sidebar">


          <p>This page was generated by <a href="pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("lizhen9880@gmail.com");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>
		<!--BAIDU_YUNTU_START-->
		<script>
		(function(d, t) {
		    var r = d.createElement(t), s = d.getElementsByTagName(t)[0];
		    r.async = 1;
		    r.src = '//rp.baidu.com/rp3w/3w.js?sid=3930058896457355365&t=' + Math.ceil(new Date/3600000);
		    s.parentNode.insertBefore(r, s);
		})(document, 'script');
		</script>
		<!--BAIDU_YUNTU_END-->
  </body>
</html>
